<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fixtures</title>
</head>
<body>
 <!--  <h2>Today's Fixtures</h2>

    <% if (fixtures && fixtures.length > 0) { %> 
        <table>
            <thead>
                <tr>
                    <th>Team 1</th>
                    <th>Team 2</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody>
                <% fixtures.forEach(fixture => { %>
                    <tr>
                        <td><%= fixture.team1 %></td>
                        <td><%= fixture.team2 %></td>
                        <td><%= fixture.time %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    <% } else { %>
        <p>No fixtures for today.</p>
    <% } %>
    -->
  <div id="fixtures-container"></div>

  <script>
    // Get today's date
const today = new Date();
const yyyy = today.getFullYear();
const mm = String(today.getMonth() + 1).padStart(2, '0'); // Months are zero-based
const dd = String(today.getDate()).padStart(2, '0');
const formattedDate = `${yyyy}-${mm}-${dd}`;

// Debugging to check the formatted date
console.log("Today's date:", formattedDate);
    const apiUrl = 'https://v3.football.api-sports.io/fixtures?date=$formattedDate&timezone=Europe/London';
    const apiKey = '26ea9ad305ec3a061b3153a8137fdfdc'; 
    
    fetch(apiUrl, {
      method: 'GET',
      headers: {
        'x-rapidapi-host': 'v3.football.api-sports.io',
        'x-rapidapi-key': apiKey
      }
    })
    .then(response => response.json())
    .then(data => {
      console.log(data);
      displayFixtures(data.response);  // Pass the fixtures array to the display function
    })
    .catch(error => console.error('Error fetching data:', error));

    // Function to display the fixtures in the HTML
    function displayFixtures(fixtures) {
      const container = document.getElementById('fixtures-container');
      
      if (fixtures.length === 0) {
        container.innerHTML = '<p>No fixtures available</p>';
        return;
      }

      fixtures.forEach(fixture => {
        // Create elements for fixture details
        const fixtureDiv = document.createElement('div');
        const homeTeam = fixture.teams.home.name;
        const awayTeam = fixture.teams.away.name;
        const league = fixture.league.name;
        const date = new Date(fixture.fixture.date).toLocaleString();

        // Set fixture details in the div
        fixtureDiv.innerHTML = `
          <h3>${homeTeam} vs ${awayTeam}</h3>
          <p>League: ${league}</p>
          <p>Date: ${date}</p>
        `;

        // Append the fixture to the container
        container.appendChild(fixtureDiv);
      });
    }
  </script>

</body>
</html>
